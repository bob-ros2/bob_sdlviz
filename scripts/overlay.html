<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bob Overlay</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/markdown-it@13.0.1/dist/markdown-it.min.js"></script>
  <style>
    body {
      background: #0f172a;
      /* Solid Slate 900 */
      margin: 0;
      overflow: hidden;
      font-family: sans-serif;
      color: white;
    }

    #debug-status {
      position: absolute;
      top: 10px;
      left: 10px;
      background: red;
      padding: 5px;
      z-index: 9999;
      font-size: 12px;
    }

    .glass {
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
  </style>
</head>

<body>
  <div id="debug-status">JS NOT STARTED</div>
  <div id="root"></div>

  <script>
    // Standard JS to confirm execution
    console.log("Bob Overlay: Raw JS executing...");
    document.getElementById('debug-status').innerText = "JS RUNNING - WAITING FOR REACT";
    document.getElementById('debug-status').style.background = "orange";

    // Heartbeat to confirm rendering loop
    setInterval(() => {
      console.log("Bob Overlay: Heartbeat " + new Date().toLocaleTimeString());
    }, 2000);
  </script>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;
    const md = window.markdownit({ html: true });

    console.log("Bob Overlay: Babel/React starting...");

    const App = () => {
      const [content, setContent] = useState('# React is ALIVE! ðŸš€\nWaiting for tokens...');

      useEffect(() => {
        console.log("Bob Overlay: React App mounted");
        document.getElementById('debug-status').innerText = "REACT READY";
        document.getElementById('debug-status').style.background = "green";

        window.updateContent = (newContent) => {
          console.log("Bob Overlay: New content received");
          setContent(newContent);
        };
      }, []);

      return (
        <div className="w-screen h-screen flex flex-col p-8">
          <div className="glass rounded-3xl flex-1 flex flex-col p-8 overflow-hidden border-l-8 border-blue-500 shadow-2xl">
            <h3 className="text-blue-400 font-bold mb-4 tracking-tighter text-xl">BOB_STREAM_v1.0</h3>
            <div
              className="prose prose-invert max-w-none text-2xl"
              dangerouslySetInnerHTML={{ __html: md.render(content) }}
            />
          </div>
        </div>
      );
    };

    try {
      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    } catch (e) {
      console.error("Bob Overlay: Render failed", e);
      document.getElementById('debug-status').innerText = "REACT FAILED: " + e.message;
    }
  </script>
</body>

</html>